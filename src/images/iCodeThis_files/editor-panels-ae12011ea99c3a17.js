(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3231],{64578:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor-panels",function(){return s(26341)}])},60359:function(e,t,s){"use strict";s.d(t,{Z:function(){return f}});var a=s(85893),i=s(41664),n=s.n(i),l=s(40725),r=s.n(l),o=s(87514),c=s(72603),d=s(11163),u=s(34726),h=s(74021),m=s(54009),x=s(36674),g=s(15933);function p(e){let{width:t,height:s,className:i,strokeWidth:n}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,width:t,height:s,viewBox:"0 0 24 24",strokeWidth:n,stroke:"currentColor",fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,a.jsx)("path",{d:"M12 12c2 -2.96 0 -7 -1 -8c0 3.038 -1.773 4.741 -3 6c-1.226 1.26 -2 3.24 -2 5a6 6 0 1 0 12 0c0 -1.532 -1.056 -3.94 -2 -5c-1.786 3 -2.791 3 -4 2z"})]})}function b(e){let{currentStreak:t}=e;return(0,a.jsxs)("div",{className:"text-white flex justify-center items-center",children:[(0,a.jsx)("p",{className:"text-xl font-bold",children:"New streak:"}),(0,a.jsxs)("div",{className:"w-10 ml-3 animation-wrapper text-white relative",children:[(0,a.jsxs)("div",{id:"fire",className:"absolute left-1/2 -translate-x-1/2 scale-0 top-3",children:[(0,a.jsx)(p,{width:"62",height:"62",strokeWidth:"4",className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 text-red-500 blur-md"}),(0,a.jsx)(p,{width:"60",height:"60",strokeWidth:"4",className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 text-orange-500"}),(0,a.jsx)(p,{width:"46",height:"46",strokeWidth:"2",className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 text-amber-400 mt-[2px]"}),(0,a.jsx)("h2",{className:"text-2xl text-orange-950 font-black absolute z-1 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 mt-1",children:t})]}),(0,a.jsx)("h2",{id:"before",className:"text-2xl text-center font-bold relative z-1",children:t-1}),(0,a.jsx)("small",{id:"plus",className:"absolute top-1/2 -right-6 -translate-y-1/2 font-bold opacity-0",children:"+1"})]})]})}function f(e){let{title:t,img:s,isOpen:i=!1,submissionId:l,challengeId:p,streak:f,showStreakAnimation:j}=e,v=(0,d.useRouter)(),w=(0,m.U)(),{width:y,height:N}=(0,c.n)();return(0,a.jsx)(o.V,{open:i,onClose:()=>v.replace("/submissions/".concat(l)),className:"relative z-50",children:(0,a.jsxs)("div",{className:"bg-purple-900 bg-opacity-70 fixed inset-0 flex items-center justify-center p-4 md:overflow-x-hidden",children:[(0,a.jsx)(r(),{width:y,height:N}),(0,a.jsxs)(o.V.Panel,{className:"relative bg-purple-800 p-10 rounded-xl shadow-xl sm:p-12 sm:pt-10 text-center z-10 max-w-2xl",children:[(0,a.jsx)("div",{className:"absolute left-8 ".concat(j?"top-9 left-8":"top-2 left-2 sm:top-8 sm:left-8"),children:(0,a.jsx)(x.Z,{shareUrl:"".concat((0,u.SV)(),"/submissions/").concat(l),title:"I completed the '".concat(t,"' coding challenge")})}),j&&(0,a.jsx)("div",{className:"h-10 mb-4 w-max ml-auto",children:(0,a.jsx)(b,{currentStreak:f})}),(0,a.jsx)(o.V.Title,{className:"text-4xl font-bold tracking-tight",children:"Congratulations! \uD83E\uDD73"}),(0,a.jsxs)("p",{className:"text-xl text-white my-6 max-w-5xl",children:["You've finished the ",(0,a.jsx)("b",{children:t})," challenge!"]}),(0,a.jsx)(n(),{legacyBehavior:!0,href:"/submissions/".concat(l),children:(0,a.jsx)("a",{children:(0,a.jsx)("img",{className:"block w-full rounded-lg mb-6 ring-2 ring-transparent hover:ring-purple-400",src:s,alt:t})})}),w.data&&!(0,h.G7)(w.data.user_roles)&&(0,a.jsx)("div",{children:(0,a.jsx)(n(),{legacyBehavior:!0,href:"/pro",children:(0,a.jsxs)("a",{className:"w-full inline-flex justify-center bg-yellow-500 text-purple-900 py-3 px-6 mb-4 sm:mb-0 rounded-lg font-bold hover:opacity-75 md:w-max",children:[(0,a.jsx)(g.mB,{})," Unlock all PRO features"]})})}),(0,a.jsxs)("div",{className:"space-y-4 md:space-x-4",children:[(0,a.jsx)(n(),{legacyBehavior:!0,href:"/challenges",children:(0,a.jsx)("a",{className:"w-full inline-block bg-purple-600 py-3 px-6 rounded-lg text-white font-medium hover:opacity-75 md:w-max",children:"Start another challenge"})}),(0,a.jsx)(n(),{legacyBehavior:!0,href:"/challenges/".concat(p),children:(0,a.jsx)("a",{className:"w-full inline-block bg-purple-900 py-3 px-6 rounded-lg text-white font-medium hover:opacity-75 md:w-max",children:"View other submissions"})})]})]})]})})}},26341:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(85893),i=s(96594),n=s(60359),l=s(33902),r=s(24698),o=s(46870),c=s(39251),d=s(34726),u=s(11163),h=s(67294),m=s(86501),x=s(50708),g=s(38776);function p(){var e,t,s;let[p,b]=(0,h.useState)(!1),[f,j]=(0,h.useState)(!1),v=(0,u.useRouter)(),w=c.h.submission.getSubmissionByChallengeId.useQuery({challengeId:v.query.challengeId},{enabled:!!v.query.challengeId}),y=c.h.settings.getSettings.useQuery(void 0,{staleTime:1/0}),N=c.h.useContext(),S=c.h.submission.saveSubmission.useMutation(),k=c.h.submission.publishSubmission.useMutation(),Z=c.h.submission.deleteSubmission.useMutation(),_=c.h.settings.updateSettings.useMutation();if(!v.query.challengeId&&v.isReady&&v.replace("/404"),"loading"===w.status||w.isFetching||"loading"===y.status)return(0,a.jsx)(r.Z,{children:(0,a.jsx)(o.aN,{})});if("error"===w.status)return(null===(t=w.error.data)||void 0===t?void 0:t.code)==="NOT_FOUND"&&v.replace("/404"),(null===(s=w.error.data)||void 0===s?void 0:s.code)==="UNAUTHORIZED"&&v.replace("/login"),(0,a.jsx)(r.Z,{children:(0,a.jsxs)("p",{className:"text-3xl mt-24",children:["In order to access this challenge, you need to upgrade to a",(0,a.jsx)(i.Z,{}),"membership!"]})});let I=(0,d.gQ)(w.data.submission);async function C(e){(0,g.Z)(w.data,"Data is missing.");try{await S.mutateAsync({html:e["index.html"].value||"",javascript:e["script.js"].value||"",css:e["style.css"].value||"",id:String(w.data.submission.id)}),m.ZP.success("Saved!",{position:"top-center"})}catch(e){m.ZP.error(e.message,{duration:5e3})}}async function P(e){(0,g.Z)(w.data,"Data is missing.");let{challengeId:t}=v.query;(0,g.Z)("string"==typeof t,"ChallengeId should be a string");try{await C(e),await k.mutateAsync({id:String(w.data.submission.id)}),N.submission.getSubmissionByChallengeId.invalidate({challengeId:t}),N.user.getUserStats.invalidate(),N.badge.getBadgeProgress.invalidate(),"started"===w.data.submission.status?(b(!0),w.data.streak.updatedToday||j(!0)):v.replace("/submissions/".concat(w.data.submission.id))}catch(e){m.ZP.error(e.message,{duration:5e3})}}async function B(e,t){try{await C(t),await _.mutateAsync({editorSettings:e}),m.ZP.success("Setting saved"),v.reload()}catch(e){m.ZP.error("Could not save settings")}}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.uU,{}),(0,a.jsx)(n.Z,{title:w.data.challenge.title,img:"/images/projects/".concat(w.data.challenge.img_path),isOpen:p,submissionId:String(w.data.submission.id),challengeId:String(w.data.challenge.id),showStreakAnimation:f,streak:w.data.streak.currentStreak}),(0,a.jsx)(l.Z,{initialCode:I,showNav:!0,showFooter:!0,saveRecord:C,submitRecord:P,deleteRecord:function(){(0,g.Z)(w.data,"Data is missing.");let e=String(w.data.submission.id);Z.mutate({id:e},{onSuccess(){v.replace("/app")}})},challengeImage:w.data.challenge.img_path,editorSettings:(null===(e=y.data)||void 0===e?void 0:e.settings)||x.Td,saveSettings:B})]})}}},function(e){e.O(0,[1604,1611,1664,6312,973,7056,4138,2832,8819,4583,3902,9774,2888,179],function(){return e(e.s=64578)}),_N_E=e.O()}]);